<!DOCTYPE html>
<html>
  <head>
    <title>demo</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1>Schema test</h1>
    <p>testing schema ref, populate</p>
    <form action="" method="post">
      <input type="text" name="nickname" placeholder="enter nickname"/>
      <button type="submit">change nickname</button>
    </form>
    <section>
      <h3>User Detail</h3>
      <div>ID <%= user._id %></div>
      <div>사용자 이름<%= user.name %></div>
      <div>이메일 <%= user.email %></div>
      <div>비밀번호 <%= user.password %></div>
      <div>사용자 닉네임 <%= user.profiles[0].nickname %></div>
    </section>
    <section>
      <h3>Profile Detail</h3>
      <div>ID <%= profile._id %></div>
      <div>닉네임 <%= profile.nickname %></div>
      <p><%= profile.nickname %>가 작성한 모든 포스트들</p>
      <% profile.posts.forEach(function(post, index) { %>
        <div><%= index + 1 %>, <%= post.content %></div>
      <% }); %>
    </section>
    <section>
      <h3>작성된 모든 포스트들..</h3>
      <% posts.forEach(function(post, index) { %>
        <h4>포스트 번호:<%= index + 1 %></h4>
        <div>ID: <%= post._id %></div>
        <div>내용<%= post.content %></div>
      <% }); %>
    </section>
  </body>
</html>
